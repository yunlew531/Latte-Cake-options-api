(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a65eebe8"],{"043e":function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a");var r=c("7a23"),o=Object(r["withScopeId"])("data-v-c5acb0aa");Object(r["pushScopeId"])("data-v-c5acb0aa");var a={class:"rounded bg-white shadow w-100 p-10"},l={class:"mb-5"},i={class:"row"},n={class:"col-lg-4"},d={class:"mb-3"},s=Object(r["createVNode"])("label",{for:"imgs",class:"form-label mb-1"},"新增多圖",-1),u={class:"input-group"},p={class:"mb-3"},b=Object(r["createVNode"])("label",{for:"img",class:"form-label mb-1"},"圖片上傳",-1),m={class:"product-img-list d-flex flex-wrap list-unstyled py-sm-5 m-0"},f={key:0,class:"product-img position-relative mb-2"},O=Object(r["createVNode"])("span",{class:"material-icons-outlined"}," close ",-1),j=Object(r["createVNode"])("span",{class:"material-icons-outlined"}," close ",-1),v={class:"col-lg-8"},g={class:"mb-3"},V=Object(r["createVNode"])("label",{for:"title",class:"form-label mb-1"},"名稱",-1),h={class:"row"},N={class:"col-6"},y={class:"mb-3"},w=Object(r["createVNode"])("label",{for:"category",class:"form-label mb-1"},"分類",-1),x={class:"col-6"},k={class:"mb-3"},U=Object(r["createVNode"])("label",{for:"unit",class:"form-label mb-1"},"單位",-1),S={class:"row"},D={class:"col-6"},M={class:"mb-3"},I=Object(r["createVNode"])("label",{for:"origin_price",class:"form-label mb-1"},"原價",-1),T={class:"col-6"},_={class:"mb-3"},C=Object(r["createVNode"])("label",{for:"price",class:"form-label mb-1"},"售價",-1),L={class:"row"},B={class:"col-4"},$={class:"form-label"},q=Object(r["createTextVNode"])(" 熱量 "),P={class:"col-4"},F={class:"form-label"},R=Object(r["createTextVNode"])(" 蛋白質 "),J={class:"col-4"},A={class:"form-label"},E=Object(r["createTextVNode"])(" 脂肪 "),z=Object(r["createVNode"])("div",{class:"dropdown-divider my-5"},null,-1),G={class:"mb-3"},H=Object(r["createVNode"])("label",{for:"description",class:"form-label mb-1"},"產品描述",-1),K={class:"mb-3"},Q=Object(r["createVNode"])("label",{for:"content",class:"form-label mb-1"},"產品內容",-1),W={class:"d-flex align-items-center mt-4"},X={class:"me-auto"},Y=Object(r["createVNode"])("label",{for:"freeDelivery",class:"ms-2 me-10 me-sm-0"},"免運費",-1),Z=Object(r["createVNode"])("label",{for:"is_enabled",class:"ms-2"},"啟用上架",-1),ee=Object(r["createVNode"])("button",{class:"btn btn-primary text-nowrap",type:"submit"}," 送出 ",-1);Object(r["popScopeId"])();var te=o((function(e,t,c,te,ce,re){var oe=Object(r["resolveComponent"])("Loading"),ae=Object(r["resolveComponent"])("Field"),le=Object(r["resolveComponent"])("ErrorMessage"),ie=Object(r["resolveComponent"])("Form");return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])(oe,{active:ce.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return ce.isLoading=e}),"is-full-page":!1},null,8,["active"]),Object(r["createVNode"])("h2",l,Object(r["toDisplayString"])(c.boardStatus)+"產品",1),Object(r["createVNode"])(ie,{onSubmit:re.addProduct},{default:o((function(e){var o=e.errors;return[Object(r["createVNode"])("div",i,[Object(r["createVNode"])("div",n,[Object(r["createVNode"])("div",d,[s,Object(r["createVNode"])("div",u,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{id:"imgs",name:"imgs",type:"text",class:"form-control",placeholder:"輸入圖片網址","onUpdate:modelValue":t[2]||(t[2]=function(e){return ce.product.imgsTemp=e})},null,512),[[r["vModelText"],ce.product.imgsTemp,void 0,{trim:!0}]]),Object(r["createVNode"])("button",{type:"button",class:"text-black btn btn-outline-secondary",onClick:t[3]||(t[3]=function(){return re.addImg&&re.addImg.apply(re,arguments)})}," 新增 ")])]),Object(r["createVNode"])("div",p,[b,Object(r["createVNode"])("input",{ref:"fileInput",onChange:t[4]||(t[4]=function(){return re.upLoadImg&&re.upLoadImg.apply(re,arguments)}),type:"file",class:"form-control"},null,544)]),Object(r["createVNode"])("ul",m,[ce.product.imageUrl?(Object(r["openBlock"])(),Object(r["createBlock"])("li",f,[Object(r["createVNode"])("img",{src:ce.product.imageUrl,class:"img-fluid",alt:ce.product.title},null,8,["src","alt"]),Object(r["createVNode"])("button",{type:"button",class:"img-close-btn btn p-0 lh-1 position-absolute end-0 top-0",onClick:t[5]||(t[5]=function(e){return ce.product.imageUrl=""})},[O])])):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(ce.product.imagesUrl,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{key:e+t,class:"product-img position-relative mb-2"},[Object(r["createVNode"])("img",{src:e,class:"img-fluid",alt:ce.product.title},null,8,["src","alt"]),Object(r["createVNode"])("button",{type:"button",class:"img-close-btn btn p-0 lh-1 position-absolute end-0 top-0",onClick:function(e){return re.removeImg(t)}},[j],8,["onClick"])])})),128))])]),Object(r["createVNode"])("div",v,[Object(r["createVNode"])("div",g,[V,Object(r["createVNode"])(ae,{id:"title",name:"名稱",type:"text",class:["form-control",{"is-invalid":o["名稱"]}],placeholder:"請輸入 名稱",rules:"required",modelValue:ce.product.title,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ce.product.title=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(r["createVNode"])(le,{name:"名稱",class:"invalid-feedback"})]),Object(r["createVNode"])("div",h,[Object(r["createVNode"])("div",N,[Object(r["createVNode"])("div",y,[w,Object(r["createVNode"])(ae,{id:"category",name:"分類",type:"text",class:["form-control",{"is-invalid":o["分類"]}],placeholder:"請輸入 分類",rules:"required",modelValue:ce.product.category,"onUpdate:modelValue":t[7]||(t[7]=function(e){return ce.product.category=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(r["createVNode"])(le,{name:"分類",class:"invalid-feedback"})])]),Object(r["createVNode"])("div",x,[Object(r["createVNode"])("div",k,[U,Object(r["createVNode"])(ae,{id:"unit",name:"單位",type:"text",class:["form-control",{"is-invalid":o["單位"]}],placeholder:"請輸入 單位",rules:"required",modelValue:ce.product.unit,"onUpdate:modelValue":t[8]||(t[8]=function(e){return ce.product.unit=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(r["createVNode"])(le,{name:"單位",class:"invalid-feedback"})])])]),Object(r["createVNode"])("div",S,[Object(r["createVNode"])("div",D,[Object(r["createVNode"])("div",M,[I,Object(r["createVNode"])(ae,{id:"origin_price",name:"原價",type:"number",class:["form-control",{"is-invalid":o["原價"]}],placeholder:"請輸入 原價",rules:"required",min:"0",modelValue:ce.product.origin_price,"onUpdate:modelValue":t[9]||(t[9]=function(e){return ce.product.origin_price=e}),modelModifiers:{number:!0}},null,8,["class","modelValue"]),Object(r["createVNode"])(le,{name:"原價",class:"invalid-feedback"})])]),Object(r["createVNode"])("div",T,[Object(r["createVNode"])("div",_,[C,Object(r["createVNode"])(ae,{id:"price",name:"售價",type:"number",class:["form-control",{"is-invalid":o["售價"]}],placeholder:"請輸入 售價",rules:"required",min:"0",modelValue:ce.product.price,"onUpdate:modelValue":t[10]||(t[10]=function(e){return ce.product.price=e}),modelModifiers:{number:!0}},null,8,["class","modelValue"]),Object(r["createVNode"])(le,{name:"售價",class:"invalid-feedback"})])])]),Object(r["createVNode"])("div",L,[Object(r["createVNode"])("div",B,[Object(r["createVNode"])("label",$,[q,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",class:"form-control mt-1",placeholder:"請輸入 熱量","onUpdate:modelValue":t[11]||(t[11]=function(e){return ce.product.calories=e})},null,512),[[r["vModelText"],ce.product.calories,void 0,{number:!0}]])])]),Object(r["createVNode"])("div",P,[Object(r["createVNode"])("label",F,[R,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",class:"form-control mt-1",placeholder:"請輸入 蛋白質","onUpdate:modelValue":t[12]||(t[12]=function(e){return ce.product.protein=e})},null,512),[[r["vModelText"],ce.product.protein,void 0,{number:!0}]])])]),Object(r["createVNode"])("div",J,[Object(r["createVNode"])("label",A,[E,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",class:"form-control mt-1",placeholder:"請輸入 脂肪","onUpdate:modelValue":t[13]||(t[13]=function(e){return ce.product.fat=e})},null,512),[[r["vModelText"],ce.product.fat,void 0,{number:!0}]])])])]),z,Object(r["createVNode"])("div",G,[H,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{id:"description",name:"產品描述",class:"form-control",placeholder:"請輸入\n            產品描述","onUpdate:modelValue":t[14]||(t[14]=function(e){return ce.product.description=e}),cols:"30",rows:"3"},null,512),[[r["vModelText"],ce.product.description,void 0,{trim:!0}]])]),Object(r["createVNode"])("div",K,[Q,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{id:"content",name:"產品內容",class:"form-control",placeholder:"請輸入 產品內容","onUpdate:modelValue":t[15]||(t[15]=function(e){return ce.product.content=e}),cols:"30",rows:"3"},null,512),[[r["vModelText"],ce.product.content,void 0,{trim:!0}]])]),Object(r["createVNode"])("div",W,[Object(r["createVNode"])("div",X,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{id:"freeDelivery",type:"checkbox",class:"form-check-input","onUpdate:modelValue":t[16]||(t[16]=function(e){return ce.product.freeDelivery=e})},null,512),[[r["vModelCheckbox"],ce.product.freeDelivery]]),Y,Object(r["withDirectives"])(Object(r["createVNode"])("input",{id:"is_enabled",type:"checkbox",class:"form-check-input ms-0 ms-sm-5","onUpdate:modelValue":t[17]||(t[17]=function(e){return ce.product.is_enabled=e})},null,512),[[r["vModelCheckbox"],ce.product.is_enabled]]),Z]),"編輯"===c.boardStatus?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,onClick:t[18]||(t[18]=function(){return re.handStatus&&re.handStatus.apply(re,arguments)}),class:"btn btn-outline-primary text-nowrap mx-3",type:"button"}," 取消 ")):Object(r["createCommentVNode"])("",!0),ee])])])]})),_:1},8,["onSubmit"])])})),ce=c("1da1"),re=(c("96cf"),c("a434"),c("2f34")),oe=c("365c"),ae={name:"AddProduct",props:{boardStatus:{type:String,default:"新增"},tempProduct:{type:String}},emits:{handStatus:function(e){return"新增"===e.status}},data:function(){return{product:{imgs:[]},fileInput:null,isLoading:!1}},methods:{addImg:function(){this.product.imagesUrl||(this.product.imagesUrl=[]),this.product.imgsTemp?this.product.imageUrl&&this.product.imagesUrl.length>=4||!this.product.imageUrl&&this.product.imagesUrl.length>=5?Object(re["a"])("已達圖片上限!","danger"):this.product.imagesUrl.push(this.product.imgsTemp):Object(re["a"])("請輸入網址!","danger"),this.product.imgsTemp=""},addProduct:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var c,r,o,a,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,c={title:e.product.title,category:e.product.category,origin_price:e.product.origin_price,price:e.product.price,unit:e.product.unit,description:e.product.description,content:e.product.content,is_enabled:e.product.is_enabled,imageUrl:e.product.imageUrl,imagesUrl:e.product.imagesUrl,freeDelivery:e.product.freeDelivery,calories:e.product.calories,protein:e.product.protein,fat:e.product.fat},r="新增"===e.boardStatus?oe["u"]:oe["D"],o=e.product.id,t.prev=4,t.next=7,r(c,o);case 7:a=t.sent,l=a.data,l.success?(Object(re["a"])("新增"===e.boardStatus?"新增成功!":"完成更新!","success"),e.$router.push("/admin/products")):Object(re["a"])("發生錯誤!","danger"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),Object(re["a"])("發生錯誤!","danger");case 15:e.isLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()},removeImg:function(e){this.product.imagesUrl.splice(e,1)},upLoadImg:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var c,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,c=new FormData,c.append("file-to-upload",e.$refs.fileInput.files[0]),t.prev=3,t.next=6,Object(oe["z"])(c);case 6:r=t.sent,o=r.data,o.success?(e.product.imageUrl=o.imageUrl,e.$refs.fileInput.value="",Object(re["a"])("成功上傳!","success")):Object(re["a"])(o.message,"danger"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),Object(re["a"])("發生錯誤!","danger");case 14:e.isLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},handStatus:function(){this.$emit("handStatus",{status:"新增"}),this.$router.push("/admin/products")}},watch:{boardStatus:{handler:function(e){"編輯"===e&&(this.product=JSON.parse(this.tempProduct),this.$emitter.emit("handStatus","編輯"))},immediate:!0}},unmounted:function(){this.$emit("handStatus",{status:"新增"}),this.$emitter.emit("handStatus","新增")}};c("97e9");ae.render=te,ae.__scopeId="data-v-c5acb0aa";t["default"]=ae},"97e9":function(e,t,c){"use strict";c("a441")},a434:function(e,t,c){"use strict";var r=c("23e7"),o=c("23cb"),a=c("a691"),l=c("50c4"),i=c("7b0b"),n=c("65f0"),d=c("8418"),s=c("1dde"),u=s("splice"),p=Math.max,b=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,r,s,u,O,j,v=i(this),g=l(v.length),V=o(e,g),h=arguments.length;if(0===h?c=r=0:1===h?(c=0,r=g-V):(c=h-2,r=b(p(a(t),0),g-V)),g+c-r>m)throw TypeError(f);for(s=n(v,r),u=0;u<r;u++)O=V+u,O in v&&d(s,u,v[O]);if(s.length=r,c<r){for(u=V;u<g-r;u++)O=u+r,j=u+c,O in v?v[j]=v[O]:delete v[j];for(u=g;u>g-r+c;u--)delete v[u-1]}else if(c>r)for(u=g-r;u>V;u--)O=u+r-1,j=u+c-1,O in v?v[j]=v[O]:delete v[j];for(u=0;u<c;u++)v[u+V]=arguments[u+2];return v.length=g-r+c,s}})},a441:function(e,t,c){},e01a:function(e,t,c){"use strict";var r=c("23e7"),o=c("83ab"),a=c("da84"),l=c("5135"),i=c("861d"),n=c("9bf2").f,d=c("e893"),s=a.Symbol;if(o&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new s(e):void 0===e?s():s(e);return""===e&&(u[t]=!0),t};d(p,s);var b=p.prototype=s.prototype;b.constructor=p;var m=b.toString,f="Symbol(test)"==String(s("test")),O=/^Symbol\((.*)\)[^)]+$/;n(b,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=m.call(e);if(l(u,e))return"";var c=f?t.slice(7,-1):t.replace(O,"$1");return""===c?void 0:c}}),r({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-a65eebe8.c69b796f.js.map