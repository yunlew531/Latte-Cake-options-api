(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1db8b04d"],{"07ac":function(e,t,a){var c=a("23e7"),n=a("6f53").values;c({target:"Object",stat:!0},{values:function(e){return n(e)}})},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1799:function(e,t,a){"use strict";var c=a("7a23"),n={class:"d-flex justify-content-center"},r={"aria-label":"Page navigation example"},o={class:"pagination m-0"},s=Object(c["createVNode"])("span",{"aria-hidden":"true"},"«",-1),i=Object(c["createVNode"])("span",{"aria-hidden":"true"},"»",-1);function d(e,t,a,d,l,u){return Object(c["openBlock"])(),Object(c["createBlock"])("section",n,[Object(c["createVNode"])("nav",r,[Object(c["createVNode"])("ul",o,[Object(c["createVNode"])("li",{class:["page-item",{disabled:1===l.pagination.current_page}]},[Object(c["createVNode"])("a",{class:"page-link",href:"javascript:;","aria-label":"Previous",onClick:t[1]||(t[1]=function(e){return u.handPage(-1)})},[s])],2),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(l.pagination.total_pages,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:e,class:["page-item",[{active:e===l.pagination.current_page}]]},[Object(c["createVNode"])("a",{class:"page-link",href:"javascript:;",onClick:function(t){return u.handPage(e,!0)}},Object(c["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(c["createVNode"])("li",{class:["page-item",{disabled:l.pagination.current_page===l.pagination.total_pages}]},[Object(c["createVNode"])("a",{class:"page-link",href:"javascript:;","aria-label":"Next",onClick:t[2]||(t[2]=function(e){return u.handPage(1)})},[i])],2)])])])}var l={name:"Pagination",props:{pages:{type:Object,default:function(){return{}}}},emits:{handPage:function(e){return"number"===typeof e}},data:function(){return{pagination:{}}},methods:{handPage:function(e,t){var a=1;if(t){if(this.pagination.current_page===e)return;a=e}else this.pagination.current_page+e>=this.pagination.total_pages&&(a=this.pagination.total_pages);this.$emit("handPage",a)}},watch:{pages:{handler:function(e){this.pagination=e},immediate:!0}}};l.render=d;t["a"]=l},"466d":function(e,t,a){"use strict";var c=a("d784"),n=a("825a"),r=a("50c4"),o=a("1d80"),s=a("8aa5"),i=a("14c3");c("match",(function(e,t,a){return[function(t){var a=o(this),c=void 0==t?void 0:t[e];return void 0!==c?c.call(t,a):new RegExp(t)[e](String(a))},function(e){var c=a(t,this,e);if(c.done)return c.value;var o=n(this),d=String(e);if(!o.global)return i(o,d);var l=o.unicode;o.lastIndex=0;var u,p=[],b=0;while(null!==(u=i(o,d))){var h=String(u[0]);p[b]=h,""===h&&(o.lastIndex=s(d,r(o.lastIndex),l)),b++}return 0===b?null:p}]}))},"61bc":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),n=Object(c["withScopeId"])("data-v-186955d2");Object(c["pushScopeId"])("data-v-186955d2");var r={class:"rounded bg-white shadow w-100 p-10"},o={class:"d-flex align-items-center"},s=Object(c["createVNode"])("h2",null,"商品列表",-1),i={key:0,class:"d-flex align-items-center"},d={class:"\n            d-flex\n            align-items-center\n            text-white\n            bg-danger\n            rounded\n            border\n            shadow\n            ms-5\n          "},l={class:"px-1"},u={class:"ps-5"},p=Object(c["createTextVNode"])("搜尋到 "),b={class:"fs-4 text-danger"},h=Object(c["createTextVNode"])(" 樣有關 "),g={class:"fs-4 text-danger"},j=Object(c["createTextVNode"])(" 的商品 "),O={class:"table-panel"},f={class:"table"},v=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{scope:"col"},"#"),Object(c["createVNode"])("th",{class:"pe-8",scope:"col"},"圖片"),Object(c["createVNode"])("th",{class:"px-8",width:"200",scope:"col"},"商品"),Object(c["createVNode"])("th",{class:"px-8",width:"50%",scope:"col"},"內容"),Object(c["createVNode"])("th",{class:"px-10",width:"130",scope:"col"},"狀態"),Object(c["createVNode"])("th",{width:"130",scope:"col"},"原價"),Object(c["createVNode"])("th",{width:"130",scope:"col"},"售價"),Object(c["createVNode"])("th",{width:"130",scope:"col"},"編輯")])],-1),m={scope:"row"},x={class:"pe-10"},N={class:"text-nowrap px-8"},V={class:"px-8 lh-1"},k={class:"h-100 d-flex align-items-center"},w={class:"m-0 lh-base tracking-2"},P={class:"text-nowrap px-8"},y={key:0,class:"text-success"},S={key:1,class:"text-danger"},B={class:"text-nowrap"},T={class:"text-nowrap"},C={class:"text-nowrap"};Object(c["popScopeId"])();var _=n((function(e,t,a,n,_,L){var D=Object(c["resolveComponent"])("Modal"),I=Object(c["resolveComponent"])("Loading"),R=Object(c["resolveComponent"])("Pagination");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(D,{ref:"msgModal",onOnDelete:L.deleteProduct},null,8,["onOnDelete"]),Object(c["createVNode"])("div",r,[Object(c["createVNode"])(I,{active:_.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return _.isLoading=e}),"is-full-page":!1},null,8,["active"]),Object(c["createVNode"])("div",o,[s,_.searchText?(Object(c["openBlock"])(),Object(c["createBlock"])("div",i,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])("span",{class:"cancel-search-btn material-icons-outlined mt-1px",onClick:t[2]||(t[2]=function(e){return _.searchText=""})}," close "),Object(c["createVNode"])("span",l,Object(c["toDisplayString"])(_.searchText),1)]),Object(c["createVNode"])("span",u,[p,Object(c["createVNode"])("span",b,Object(c["toDisplayString"])(L.displayProducts.length),1),h,Object(c["createVNode"])("span",g,Object(c["toDisplayString"])(_.searchText),1),j])])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",O,[Object(c["createVNode"])("table",f,[v,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(L.displayProducts,(function(e,a){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id},[Object(c["createVNode"])("th",m,Object(c["toDisplayString"])(a+1),1),Object(c["createVNode"])("td",x,[Object(c["createVNode"])("div",{style:{"background-image":"url(".concat(e.imageUrl||e.imagesUrl[0],")")},class:"product-img"},null,4)]),Object(c["createVNode"])("td",N,Object(c["toDisplayString"])(e.title),1),Object(c["createVNode"])("td",V,[Object(c["createVNode"])("div",k,[Object(c["createVNode"])("p",w,Object(c["toDisplayString"])(e.content),1)])]),Object(c["createVNode"])("td",P,[e.is_enabled?(Object(c["openBlock"])(),Object(c["createBlock"])("span",y,"已上架")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",S,"未上架"))]),Object(c["createVNode"])("td",B,"NT$ "+Object(c["toDisplayString"])(e.origin_price),1),Object(c["createVNode"])("td",T,"NT$ "+Object(c["toDisplayString"])(e.price),1),Object(c["createVNode"])("td",C,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(t){return L.editProduct(e)}}," 編輯 ",8,["onClick"]),Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary ms-2",onClick:t[3]||(t[3]=function(){return L.showModal&&L.showModal.apply(L,arguments)})}," 刪除 ")])])})),128))])]),_.searchText?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(R,{key:0,class:"mt-8",pages:_.pagination,onHandPage:L.handPage},null,8,["pages","onHandPage"]))])])],64)})),L=a("5530"),D=a("1da1"),I=(a("b64b"),a("07ac"),a("d81d"),a("4de4"),a("ac1f"),a("466d"),a("841c"),a("96cf"),a("365c")),R=a("2f34"),M=a("714b"),$=a("1799"),A={name:"BackendProducts",props:{search:{type:String}},emits:{handStatus:function(e){return"編輯"===e.status}},components:{Modal:M["a"],Pagination:$["a"]},data:function(){return{isLoading:!1,products:[],allProducts:[],pagination:{},searchText:""}},methods:{handPage:function(){var e=arguments,t=this;return Object(D["a"])(regeneratorRuntime.mark((function a(){var c,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return c=e.length>0&&void 0!==e[0]?e[0]:1,t.isLoading=!0,a.prev=2,a.next=5,Object(I["o"])(c);case 5:n=a.sent,r=n.data,r.success?(t.products=r.products,t.pagination=r.pagination):Object(R["a"])("發生錯誤!","danger"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](2),Object(R["a"])("發生錯誤!","danger");case 13:t.isLoading=!1;case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},getAllProducts:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var a,c,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(I["g"])();case 3:a=t.sent,c=a.data,c.success&&(n=Object.keys(c.products),r=Object.values(c.products),o=n.map((function(e,t){return Object(L["a"])({id:e},r[t])})),e.allProducts=o),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(R["a"])("發生錯誤!","danger");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteProduct:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function a(){var c,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isLoading=!0,a.prev=1,a.next=4,Object(I["f"])(e);case 4:c=a.sent,n=c.data,n.success?(Object(R["a"])("成功刪除!","success"),t.handPage()):Object(R["a"])("發生錯誤!","danger"),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),Object(R["a"])("發生錯誤!","danger");case 12:t.isLoading=!1;case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},editProduct:function(e){var t=JSON.stringify(e);this.$router.push({name:"AddProduct",params:{boardStatus:"編輯",tempProduct:t}})},handSearch:function(e){this.searchText=e},showModal:function(){this.$refs.msgModal.showModal({title:"刪除訂單",content:"是否刪除訂單? 刪除後無法恢復。"})}},computed:{displayProducts:function(){var e=this,t=null;return t=this.searchText?this.allProducts.filter((function(t){return t.title.match(e.searchText)})):this.products,t}},created:function(){this.handPage(),this.getAllProducts(),this.handSearch(this.search),this.$emitter.on("handSearch",this.handSearch)},unmounted:function(){this.$emitter.off("handSearch",this.handSearch)},beforeRouteLeave:function(e,t,a){this.isLoading=!1,a()}};a("c2a0");A.render=_,A.__scopeId="data-v-186955d2";t["default"]=A},"6f53":function(e,t,a){var c=a("83ab"),n=a("df75"),r=a("fc6a"),o=a("d1e7").f,s=function(e){return function(t){var a,s=r(t),i=n(s),d=i.length,l=0,u=[];while(d>l)a=i[l++],c&&!o.call(s,a)||u.push(e?[a,s[a]]:s[a]);return u}};e.exports={entries:s(!0),values:s(!1)}},"841c":function(e,t,a){"use strict";var c=a("d784"),n=a("825a"),r=a("1d80"),o=a("129f"),s=a("14c3");c("search",(function(e,t,a){return[function(t){var a=r(this),c=void 0==t?void 0:t[e];return void 0!==c?c.call(t,a):new RegExp(t)[e](String(a))},function(e){var c=a(t,this,e);if(c.done)return c.value;var r=n(this),i=String(e),d=r.lastIndex;o(d,0)||(r.lastIndex=0);var l=s(r,i);return o(r.lastIndex,d)||(r.lastIndex=d),null===l?-1:l.index}]}))},c2a0:function(e,t,a){"use strict";a("ecb9")},ecb9:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1db8b04d.d62e17b8.js.map