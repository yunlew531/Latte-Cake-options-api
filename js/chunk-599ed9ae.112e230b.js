(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-599ed9ae"],{2532:function(e,t,a){"use strict";var c=a("23e7"),r=a("5a34"),o=a("1d80"),n=a("ab13");c({target:"String",proto:!0,forced:!n("includes")},{includes:function(e){return!!~String(o(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,a){var c=a("861d"),r=a("c6b6"),o=a("b622"),n=o("match");e.exports=function(e){var t;return c(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==r(e))}},"5a34":function(e,t,a){var c=a("44e7");e.exports=function(e){if(c(e))throw TypeError("The method doesn't accept regular expressions");return e}},"98d5":function(e,t,a){"use strict";a("f876")},a434:function(e,t,a){"use strict";var c=a("23e7"),r=a("23cb"),o=a("a691"),n=a("50c4"),s=a("7b0b"),l=a("65f0"),d=a("8418"),i=a("1dde"),u=i("splice"),b=Math.max,p=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,c,i,u,O,j,V=s(this),h=n(V.length),N=r(e,h),g=arguments.length;if(0===g?a=c=0:1===g?(a=0,c=h-N):(a=g-2,c=p(b(o(t),0),h-N)),h+a-c>m)throw TypeError(f);for(i=l(V,c),u=0;u<c;u++)O=N+u,O in V&&d(i,u,V[O]);if(i.length=c,a<c){for(u=N;u<h-c;u++)O=u+c,j=u+a,O in V?V[j]=V[O]:delete V[j];for(u=h;u>h-c+a;u--)delete V[u-1]}else if(a>c)for(u=h-c;u>N;u--)O=u+c-1,j=u+a-1,O in V?V[j]=V[O]:delete V[j];for(u=0;u<a;u++)V[u+N]=arguments[u+2];return V.length=h-c+a,i}})},ab13:function(e,t,a){var c=a("b622"),r=c("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,"/./"[e](t)}catch(c){}}return!1}},b0c0:function(e,t,a){var c=a("83ab"),r=a("9bf2").f,o=Function.prototype,n=o.toString,s=/^\s*function ([^ (]*)/,l="name";c&&!(l in o)&&r(o,l,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(e){return""}}})},b7c8:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("caad"),a("2532");var c=a("7a23"),r=Object(c["withScopeId"])("data-v-7c103993");Object(c["pushScopeId"])("data-v-7c103993");var o=Object(c["createVNode"])("div",{class:"nav-bg"},null,-1),n={class:"checkout-panel container position-relative mb-12"},s=Object(c["createTextVNode"])("返回購物車"),l={class:"row gx-8"},d={class:"col-md-6"},i=Object(c["createVNode"])("h3",{class:"fs-4 text-black-100"},"資料填寫",-1),u={class:"form-group text-black-200"},b=Object(c["createVNode"])("label",{for:"orderEmail",class:"form-label mb-1"},"Email",-1),p={class:"form-group text-black-200"},m=Object(c["createVNode"])("label",{for:"name",class:"form-label mb-1"},"姓名",-1),f=Object(c["createVNode"])("span",null,"姓名為必填",-1),O={class:"form-group text-black-200"},j=Object(c["createVNode"])("label",{for:"tel",class:"form-label mb-1"},"電話",-1),V=Object(c["createVNode"])("span",null,"請填寫正確電話號碼",-1),h={class:"form-group text-black-200"},N=Object(c["createVNode"])("label",{for:"address",class:"form-label mb-1"},"地址",-1),g=Object(c["createVNode"])("span",null,"地址為必填",-1),v={class:"form-group text-black-200"},x=Object(c["createVNode"])("label",{for:"payment",class:"form-label mb-1"},"付款方式",-1),w=Object(c["createVNode"])("option",{value:""},"貨到付款",-1),y=Object(c["createVNode"])("option",{value:"ATM 繳費"},"ATM 繳費",-1),k=Object(c["createVNode"])("option",{value:"Apple Pay"},"Apple Pay",-1),S=Object(c["createVNode"])("option",{value:"Google Pay"},"Google Pay",-1),C=Object(c["createTextVNode"])("送出訂單"),D={class:"col-md-6"},T={class:"bg-white shadow-sm rounded p-8"},_={class:"list-unstyled"},B={type:"button",class:"btn d-flex flex-wrap align-items-end w-100 p-3"},I={class:"text-primary d-inline-block d-sm-block fs-5 m-0"},$=Object(c["createVNode"])("span",{class:"text-primary fs-7 ms-5"},"x",-1),E={class:"text-primary fs-7 ms-5 me-auto"},F={class:"text-start text-primary fs-5 w-100 w-sm-auto"},M=Object(c["createVNode"])("span",{class:"fs-7"},"NT$",-1),R={class:"product-content"},A={class:"fs-7 d-flex justify-content-between"},L=Object(c["createTextVNode"])(" 商品連結 "),U={class:"fs-6 fw-light py-1"},q={class:"d-flex flex-wrap"},P=Object(c["createTextVNode"])("選購更多商品"),G={class:"text-primary fs-5 m-0"},J=Object(c["createTextVNode"])(" 總金額 NT$ "),z={key:0,class:"fs-3"},H={class:"rounded shadow-sm bg-white p-8 mt-8"},K=Object(c["createVNode"])("label",{for:"coupon",class:"form-label fs-4"},"輸入優惠折扣碼",-1),Q={class:"mb-3 flex-grow-1"},W=Object(c["createTextVNode"])("送出 "),X={class:"rounded shadow-sm bg-white p-8 mt-8"},Y=Object(c["createVNode"])("h4",{class:"fs-4 mb-3"},"折扣碼",-1),Z={class:"list-unstyled"},ee={class:"fs-5 fw-light"},te={class:"d-flex btn-group"},ae={class:"coupon-code btn flex-grow-1 m-0"},ce=Object(c["createVNode"])("button",{type:"button",class:"flex-grow-0 px-5 btn btn-primary"},"複製",-1);Object(c["popScopeId"])();var re=r((function(e,t,a,re,oe,ne){var se=Object(c["resolveComponent"])("Button"),le=Object(c["resolveComponent"])("router-link"),de=Object(c["resolveComponent"])("Field"),ie=Object(c["resolveComponent"])("ErrorMessage"),ue=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[o,Object(c["createVNode"])("section",n,[Object(c["createVNode"])(le,{to:"/cart",class:"position-absolute start-0 top-n16"},{default:r((function(){return[Object(c["createVNode"])(se,{class:"fs-6 px-5 ms-2"},{default:r((function(){return[s]})),_:1})]})),_:1}),Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",d,[Object(c["createVNode"])(ue,{onSubmit:ne.onSubmit,class:"submit-form bg-white rounded p-8 shadow-sm"},{default:r((function(e){var a=e.errors;return[i,Object(c["createVNode"])("div",u,[b,Object(c["createVNode"])(de,{id:"orderEmail",name:"Email",type:"email",class:["form-control",{"is-invalid":a["Email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:oe.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return oe.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(ie,{name:"Email",class:"invalid-feedback"})]),Object(c["createVNode"])("div",p,[m,Object(c["createVNode"])(de,{id:"name",name:"name",type:"text",class:["form-control",{"is-invalid":a["name"]}],placeholder:"請輸入名字",rules:"required",modelValue:oe.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return oe.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(ie,{name:"name",class:"invalid-feedback",as:"span"},{default:r((function(){return[f]})),_:1})]),Object(c["createVNode"])("div",O,[j,Object(c["createVNode"])(de,{id:"tel",name:"tel",type:"tel",class:["form-control",{"is-invalid":a["tel"]}],placeholder:"請輸入電話 ex: 0912345678",rules:ne.validateTel,modelValue:oe.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return oe.user.tel=e})},null,8,["class","rules","modelValue"]),Object(c["createVNode"])(ie,{name:"tel",class:"invalid-feedback",as:"span"},{default:r((function(){return[V]})),_:1})]),Object(c["createVNode"])("div",h,[N,Object(c["createVNode"])(de,{id:"address",name:"address",type:"text",class:["form-control",{"is-invalid":a["address"]}],placeholder:"請輸入地址",rules:"required",modelValue:oe.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return oe.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(ie,{name:"address",class:"invalid-feedback",as:"span"},{default:r((function(){return[g]})),_:1})]),Object(c["createVNode"])("div",v,[x,Object(c["createVNode"])(de,{id:"payment",name:"payment",class:"form-control",as:"select",modelValue:oe.user.payment,"onUpdate:modelValue":t[5]||(t[5]=function(e){return oe.user.payment=e})},{default:r((function(){return[w,y,k,S]})),_:1},8,["modelValue"])]),Object(c["createVNode"])(se,{btnType:"submit",class:"fs-6 px-5 ms-2"},{default:r((function(){return[C]})),_:1})]})),_:1},8,["onSubmit"])]),Object(c["createVNode"])("div",D,[Object(c["createVNode"])("div",T,[Object(c["createVNode"])("ul",_,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(oe.cartsData.carts,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:e.id,class:["product-item fs-5 shadow-sm rounded mb-2",{show:oe.nowShow.includes(t)}],onClick:function(e){return ne.showInfo(t)}},[Object(c["createVNode"])("button",B,[Object(c["createVNode"])("h2",I,Object(c["toDisplayString"])(e.product.title),1),$,Object(c["createVNode"])("span",E,Object(c["toDisplayString"])(e.qty),1),Object(c["createVNode"])("span",F,[M,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.total),1)])]),Object(c["createVNode"])("div",R,[Object(c["createVNode"])("div",A,[Object(c["createVNode"])(le,{to:"/product/".concat(e.product.id)},{default:r((function(){return[L]})),_:2},1032,["to"]),Object(c["createVNode"])("span",null,"售價: NT$ "+Object(c["toDisplayString"])(e.product.price),1)]),Object(c["createVNode"])("p",U,Object(c["toDisplayString"])(e.product.content),1)])],10,["onClick"])})),128))]),Object(c["createVNode"])("div",q,[Object(c["createVNode"])(le,{to:"/products",class:"me-auto"},{default:r((function(){return[Object(c["createVNode"])(se,{class:"px-5 ms-0 ms-lg-2"},{default:r((function(){return[P]})),_:1})]})),_:1}),Object(c["createVNode"])("p",G,[J,Object(c["createVNode"])("span",{class:["fs-3 me-3",{"text-decoration-line-through":oe.cartsData.final_total!==oe.cartsData.total}]},Object(c["toDisplayString"])(oe.cartsData.total),3),oe.cartsData.final_total!==oe.cartsData.total?(Object(c["openBlock"])(),Object(c["createBlock"])("span",z,Object(c["toDisplayString"])(oe.cartsData.final_total),1)):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createVNode"])("div",H,[K,Object(c["createVNode"])(ue,{onSubmit:ne.submitCoupon,class:"d-flex flex-wrap"},{default:r((function(e){var a=e.errors;return[Object(c["createVNode"])("div",Q,[Object(c["createVNode"])(de,{id:"coupon",name:"折扣碼",type:"text",class:["form-control",{"is-invalid":a["折扣碼"]}],placeholder:"請輸入折扣碼",rules:"required",modelValue:oe.couponInput,"onUpdate:modelValue":t[6]||(t[6]=function(e){return oe.couponInput=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(c["createVNode"])(ie,{name:"折扣碼",class:"invalid-feedback"})]),Object(c["createVNode"])(se,{btnType:"submit",class:"align-self-start w-100 w-lg-auto px-5 mt-2 mt-lg-0 ms-lg-2"},{default:r((function(){return[W]})),_:1})]})),_:1},8,["onSubmit"])]),Object(c["createVNode"])("div",X,[Y,Object(c["createVNode"])("ul",Z,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(oe.coupons,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:e.code,onClick:function(t){return ne.copyCouponCode(e.code)}},[Object(c["createVNode"])("h3",ee,Object(c["toDisplayString"])(e.title),1),Object(c["createVNode"])("div",te,[Object(c["createVNode"])("p",ae,Object(c["toDisplayString"])(e.code),1),ce])],8,["onClick"])})),128))])])])])])],64)})),oe=a("1da1"),ne=(a("a434"),a("96cf"),a("365c")),se=a("2f34"),le=a("8271"),de={name:"Checkout",components:{Button:le["a"]},data:function(){return{coupons:[{title:"防疫外送優惠",code:"pastadiscount"}],couponInput:"",cartsData:[],user:{},nowShow:[]}},methods:{onSubmit:function(e,t){var a=this;return Object(oe["a"])(regeneratorRuntime.mark((function e(){var c,r,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t.resetForm,a.cartsData.carts.length){e.next=4;break}return Object(se["a"])("購物車沒有商品!","danger"),e.abrupt("return");case 4:return c(),a.$store.dispatch("handIsLoading",!0),r={user:a.user},e.prev=7,e.next=10,Object(ne["w"])(r);case 10:o=e.sent,n=o.data,n.success?a.$router.push("/orderCompleted"):Object(se["a"])("發生錯誤!","danger"),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](7),Object(se["a"])("發生錯誤!","danger");case 18:a.$store.dispatch("handIsLoading",!1);case 19:case"end":return e.stop()}}),e,null,[[7,15]])})))()},copyCouponCode:function(e){return Object(oe["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e);case 3:Object(se["a"])("已複製!"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(se["a"])("無法複製!");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},submitCoupon:function(e,t){var a=this;return Object(oe["a"])(regeneratorRuntime.mark((function e(){var c,r,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=t.resetForm,c(),r={data:{code:a.couponInput}},a.$store.dispatch("handIsLoading",!0),e.prev=4,e.next=7,Object(ne["x"])(r);case 7:o=e.sent,n=o.data,n.success?(a.$store.dispatch("getCarts"),Object(se["a"])(n.message)):Object(se["a"])(n.message,"danger"),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](4),Object(se["a"])("無法套用!","danger");case 15:a.$store.dispatch("handIsLoading",!1);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))()},validateTel:function(){var e=/^(09)[0-9]{8}$/;return!!e.test(this.user.tel)||"需要正確的電話號碼"},showInfo:function(e){var t=this.nowShow.indexOf(e);-1!==t?this.nowShow.splice(t,1):this.nowShow.push(e)}},watch:{"$store.getters.cartsData":{handler:function(e){this.cartsData=e}}},created:function(){this.$store.dispatch("getCarts")}};a("98d5");de.render=re,de.__scopeId="data-v-7c103993";t["default"]=de},caad:function(e,t,a){"use strict";var c=a("23e7"),r=a("4d64").includes,o=a("44d2");c({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},f876:function(e,t,a){}}]);
//# sourceMappingURL=chunk-599ed9ae.112e230b.js.map