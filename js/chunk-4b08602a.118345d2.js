(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b08602a"],{1276:function(e,t,n){"use strict";var a=n("d784"),c=n("44e7"),r=n("825a"),i=n("1d80"),o=n("4840"),s=n("8aa5"),l=n("50c4"),d=n("14c3"),u=n("9263"),p=n("9f7f"),g=n("d039"),b=p.UNSUPPORTED_Y,h=[].push,O=Math.min,f=4294967295,j=!g((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(i(this)),r=void 0===n?f:n>>>0;if(0===r)return[];if(void 0===e)return[a];if(!c(e))return t.call(a,e,r);var o,s,l,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,b=new RegExp(e.source,p+"g");while(o=u.call(b,a)){if(s=b.lastIndex,s>g&&(d.push(a.slice(g,o.index)),o.length>1&&o.index<a.length&&h.apply(d,o.slice(1)),l=o[0].length,g=s,d.length>=r))break;b.lastIndex===o.index&&b.lastIndex++}return g===a.length?!l&&b.test("")||d.push(""):d.push(a.slice(g)),d.length>r?d.slice(0,r):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var c=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,c,n):a.call(String(c),t,n)},function(e,c){var i=n(a,this,e,c,a!==t);if(i.done)return i.value;var u=r(this),p=String(e),g=o(u,RegExp),h=u.unicode,j=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(b?"g":"y"),v=new g(b?"^(?:"+u.source+")":u,j),m=void 0===c?f:c>>>0;if(0===m)return[];if(0===p.length)return null===d(v,p)?[p]:[];var k=0,N=0,V=[];while(N<p.length){v.lastIndex=b?0:N;var w,y=d(v,b?p.slice(N):p);if(null===y||(w=O(l(v.lastIndex+(b?N:0)),p.length))===k)N=s(p,N,h);else{if(V.push(p.slice(k,N)),V.length===m)return V;for(var x=1;x<=y.length-1;x++)if(V.push(y[x]),V.length===m)return V;N=k=w}}return V.push(p.slice(k)),V}]}),!j,b)},1799:function(e,t,n){"use strict";var a=n("7a23"),c={class:"d-flex justify-content-center"},r={"aria-label":"Page navigation example"},i={class:"pagination m-0"},o=Object(a["createVNode"])("span",{"aria-hidden":"true"},"«",-1),s=Object(a["createVNode"])("span",{"aria-hidden":"true"},"»",-1);function l(e,t,n,l,d,u){return Object(a["openBlock"])(),Object(a["createBlock"])("section",c,[Object(a["createVNode"])("nav",r,[Object(a["createVNode"])("ul",i,[Object(a["createVNode"])("li",{class:["page-item",{disabled:1===d.pagination.current_page}]},[Object(a["createVNode"])("a",{class:"page-link",href:"javascript:;","aria-label":"Previous",onClick:t[1]||(t[1]=function(e){return u.handPage(-1)})},[o])],2),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(d.pagination.total_pages,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:e,class:["page-item",[{active:e===d.pagination.current_page}]]},[Object(a["createVNode"])("a",{class:"page-link",href:"javascript:;",onClick:function(t){return u.handPage(e,!0)}},Object(a["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(a["createVNode"])("li",{class:["page-item",{disabled:d.pagination.current_page===d.pagination.total_pages}]},[Object(a["createVNode"])("a",{class:"page-link",href:"javascript:;","aria-label":"Next",onClick:t[2]||(t[2]=function(e){return u.handPage(1)})},[s])],2)])])])}var d={name:"Pagination",props:{pages:{type:Object,default:function(){return{}}}},emits:{handPage:function(e){return"number"===typeof e}},data:function(){return{pagination:{}}},methods:{handPage:function(e,t){var n=1;if(t){if(this.pagination.current_page===e)return;n=e}else this.pagination.current_page+e>=this.pagination.total_pages&&(n=this.pagination.total_pages);this.$emit("handPage",n)}},watch:{pages:{handler:function(e){this.pagination=e},immediate:!0}}};d.render=l;t["a"]=d},1906:function(e,t,n){"use strict";n("f9e9")},"44e7":function(e,t,n){var a=n("861d"),c=n("c6b6"),r=n("b622"),i=r("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==c(e))}},"965d":function(e,t,n){"use strict";n("a15b"),n("d81d"),n("ac1f"),n("1276");var a={methods:{translateTime:function(e,t){var n=null;if("string"===t){var a={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};n=new Date(1e3*e).toLocaleString("zh-tw",a)}else if("dash"===t){var c={year:"numeric",month:"numeric",day:"numeric"},r=new Date(1e3*e).toLocaleString("zh-TW",c);r=r.split("/").map((function(e){return e<10?"0".concat(e):e})).join("-"),n=r}return n}}};t["a"]=a},a15b:function(e,t,n){"use strict";var a=n("23e7"),c=n("44ad"),r=n("fc6a"),i=n("a640"),o=[].join,s=c!=Object,l=i("join",",");a({target:"Array",proto:!0,forced:s||!l},{join:function(e){return o.call(r(this),void 0===e?",":e)}})},efd9:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c=Object(a["withScopeId"])("data-v-218dd28d");Object(a["pushScopeId"])("data-v-218dd28d");var r={class:"rounded bg-white shadow w-100 p-10 position-relative"},i={class:"d-flex justify-content-center"},o=Object(a["createVNode"])("h2",{class:"me-auto"},"訂單",-1),s={class:"table-panel"},l={class:"table"},d=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{scope:"col"},"#"),Object(a["createVNode"])("th",{scope:"col"},"訂單編號"),Object(a["createVNode"])("th",{scope:"col"},"成立時間"),Object(a["createVNode"])("th",{scope:"col"},"狀態"),Object(a["createVNode"])("th",{scope:"col"},"金額"),Object(a["createVNode"])("th",{width:"80",scope:"col"},"操作")])],-1),u={scope:"row"},p={key:0,class:"text-success d-flex align-items-center m-0"},g=Object(a["createVNode"])("span",{class:"material-icons-outlined"}," check ",-1),b=Object(a["createVNode"])("span",null,"已付款",-1),h={key:1,class:"text-primary d-flex align-items-center m-0"},O=Object(a["createVNode"])("span",{class:"material-icons-outlined"}," close ",-1),f=Object(a["createVNode"])("span",null,"未付款",-1);Object(a["popScopeId"])();var j=c((function(e,t,n,c,j,v){var m=Object(a["resolveComponent"])("Modal"),k=Object(a["resolveComponent"])("Loading"),N=Object(a["resolveComponent"])("Pagination");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(m,{ref:"msgModal",onOnDelete:v.deleteAllOrders},null,8,["onOnDelete"]),Object(a["createVNode"])("div",r,[Object(a["createVNode"])(k,{active:j.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return j.isLoading=e}),"is-full-page":!1},null,8,["active"]),Object(a["createVNode"])("div",i,[o,Object(a["createVNode"])("button",{class:"btn btn-primary align-self-center",type:"button",onClick:t[2]||(t[2]=function(){return v.showModal&&v.showModal.apply(v,arguments)})}," 刪除全部訂單 ")]),Object(a["createVNode"])("div",s,[Object(a["createVNode"])("table",l,[d,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(j.backstageOrders,(function(t,n){var c;return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id+n},[Object(a["createVNode"])("th",u,Object(a["toDisplayString"])(10*(j.pagination.current_page-1)+n+1),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.id),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.translateTime(null===t||void 0===t?void 0:t.create_at,"string")),1),Object(a["createVNode"])("td",null,[t.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("p",p,[g,b])):(Object(a["openBlock"])(),Object(a["createBlock"])("p",h,[O,f]))]),Object(a["createVNode"])("td",null,"NT$ "+Object(a["toDisplayString"])(null===(c=t.total)||void 0===c?void 0:c.toLocaleString()),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(e){return v.showOrderDetail(t)}}," 詳細 ",8,["onClick"])])])})),128))])])]),Object(a["createVNode"])(N,{pages:j.pagination,onHandPage:v.handPage,class:"pt-5"},null,8,["pages","onHandPage"])])],64)})),v=n("1da1"),m=(n("96cf"),n("965d")),k=n("1799"),N=n("714b"),V=n("365c"),w=n("2f34"),y={components:{Modal:N["a"],Pagination:k["a"]},mixins:[m["a"]],data:function(){return{isLoading:!1,backstageOrders:[],pagination:{}}},methods:{getOrders:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function n(){var a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isLoading=!0,n.prev=1,n.next=4,t.$store.dispatch("getBackstageOrders",e);case 4:a=n.sent,c=a.success,c||Object(w["a"])("取得訂單失敗!","danger"),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),Object(w["a"])("發生錯誤!","danger");case 12:t.isLoading=!1;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))()},deleteAllOrders:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(V["c"])();case 3:n=t.sent,a=n.data,a.success?(Object(w["a"])("已刪除全部訂單!"),e.getOrders()):Object(w["a"])(a.message,"danger"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(w["a"])("發生錯誤!","danger");case 11:e.$refs.msgModal.hideModal();case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},showOrderDetail:function(e){this.$emit("setOrderDetail",e),this.$router.push("/admin/order/".concat(e.id))},handPage:function(e){this.getOrders(e)},showModal:function(){var e={title:"刪除所有訂單",content:"是否刪除所有訂單? 刪除後無法重新取得。"};this.$refs.msgModal.showModal(e)}},watch:{"$store.getters.backstageOrders":{handler:function(e){this.backstageOrders=e.orders,this.pagination=e.pagination}}},created:function(){this.getOrders()},beforeRouteLeave:function(e,t,n){this.isLoading=!1,n()}};n("1906");y.render=j,y.__scopeId="data-v-218dd28d";t["default"]=y},f9e9:function(e,t,n){}}]);
//# sourceMappingURL=chunk-4b08602a.118345d2.js.map