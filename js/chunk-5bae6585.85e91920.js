(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bae6585"],{1276:function(e,t,r){"use strict";var c=r("d784"),a=r("44e7"),n=r("825a"),i=r("1d80"),s=r("4840"),o=r("8aa5"),d=r("50c4"),l=r("14c3"),u=r("9263"),p=r("9f7f"),b=r("d039"),O=p.UNSUPPORTED_Y,j=[].push,m=Math.min,h=4294967295,f=!b((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));c("split",(function(e,t,r){var c;return c="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var c=String(i(this)),n=void 0===r?h:r>>>0;if(0===n)return[];if(void 0===e)return[c];if(!a(e))return t.call(c,e,n);var s,o,d,l=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,O=new RegExp(e.source,p+"g");while(s=u.call(O,c)){if(o=O.lastIndex,o>b&&(l.push(c.slice(b,s.index)),s.length>1&&s.index<c.length&&j.apply(l,s.slice(1)),d=s[0].length,b=o,l.length>=n))break;O.lastIndex===s.index&&O.lastIndex++}return b===c.length?!d&&O.test("")||l.push(""):l.push(c.slice(b)),l.length>n?l.slice(0,n):l}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a,r):c.call(String(a),t,r)},function(e,a){var i=r(c,this,e,a,c!==t);if(i.done)return i.value;var u=n(this),p=String(e),b=s(u,RegExp),j=u.unicode,f=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(O?"g":"y"),g=new b(O?"^(?:"+u.source+")":u,f),v=void 0===a?h:a>>>0;if(0===v)return[];if(0===p.length)return null===l(g,p)?[p]:[];var x=0,N=0,V=[];while(N<p.length){g.lastIndex=O?0:N;var w,y=l(g,O?p.slice(N):p);if(null===y||(w=m(d(g.lastIndex+(O?N:0)),p.length))===x)N=o(p,N,j);else{if(V.push(p.slice(x,N)),V.length===v)return V;for(var k=1;k<=y.length-1;k++)if(V.push(y[k]),V.length===v)return V;N=x=w}}return V.push(p.slice(x)),V}]}),!f,O)},"25a9":function(e,t,r){"use strict";r.r(t);r("b0c0");var c=r("7a23"),a=Object(c["withScopeId"])("data-v-a8442d14");Object(c["pushScopeId"])("data-v-a8442d14");var n={class:"rounded bg-white shadow w-100 p-10"},i=Object(c["createTextVNode"])("返回訂單列表"),s={class:"d-flex flex-wrap"},o={class:"fs-5 me-auto"},d=Object(c["createVNode"])("span",{class:"fs-6 me-2"},"訂單編號:",-1),l={class:"fs-5"},u=Object(c["createVNode"])("span",{class:"fs-6 me-2"},"成立時間:",-1),p={class:"d-flex align-items-center mb-5"},b={class:"fs-6 d-flex align-items-center m-0 me-2"},O=Object(c["createTextVNode"])(" 狀態: "),j={key:0,class:"text-success d-flex align-items-center"},m=Object(c["createVNode"])("span",{class:"material-icons-outlined"}," done ",-1),h=Object(c["createVNode"])("span",null,"已付款",-1),f={key:1,class:"text-danger d-flex align-items-center"},g=Object(c["createVNode"])("span",{class:"material-icons-outlined"}," close ",-1),v=Object(c["createVNode"])("span",null,"未付款",-1),x={class:"form-check form-switch mb-0"},N={class:"list-unstyled bg-white-100 border rounded my-5"},V={class:"user-item d-flex"},w=Object(c["createVNode"])("span",{class:"user-title px-5 py-2"},"姓名",-1),y={class:"px-5 py-2"},k={class:"user-item d-flex"},S=Object(c["createVNode"])("span",{class:"user-title px-5 py-2"},"電話",-1),D={class:"px-5 py-2"},E={class:"user-item d-flex"},L=Object(c["createVNode"])("span",{class:"user-title px-5 py-2"},"信箱",-1),_={class:"px-5 py-2"},T={class:"user-item d-flex"},M=Object(c["createVNode"])("span",{class:"user-title px-5 py-2"},"地址",-1),C={class:"px-5 py-2"},B={class:"list-unstyled row g-6"},R={class:"bg-white-100 border rounded p-5"},I={class:"d-flex flex-wrap align-items-center mb-3"},$={class:"fs-5 m-0 me-auto"},U={class:"fs-7"},F=Object(c["createTextVNode"])("id: "),z={class:"fs-6"},J={class:"d-flex flex-wrap"},P={class:"flex-grow-1 mt-5 mt-sm-0"},q={class:"fs-6"},A={class:"d-flex flex-wrap align-items-center mb-2"},W={class:"me-auto"},Y={class:"mb-2"},G={class:"mb-2"},H={class:"mb-2"},K=Object(c["createTextVNode"])(" 折扣後金額: "),Q={class:"fs-5"},X={class:"d-flex flex-wrap align-items-center"},Z={class:"fs-6 ms-3 mb-0"},ee=Object(c["createTextVNode"])(" 總計: NT$ "),te=Object(c["createTextVNode"])(" 元 ");Object(c["popScopeId"])();var re=a((function(e,t,r,re,ce,ae){var ne,ie=Object(c["resolveComponent"])("Modal"),se=Object(c["resolveComponent"])("Loading"),oe=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(ie,{ref:"msgModal",onOnDelete:ae.deleteOrder},null,8,["onOnDelete"]),Object(c["createVNode"])("section",n,[Object(c["createVNode"])(se,{active:ce.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return ce.isLoading=e}),"is-full-page":!1},null,8,["active"]),Object(c["createVNode"])("div",null,[Object(c["createVNode"])(oe,{to:"/admin/orders",class:"btn btn-sm btn-outline-primary mb-3"},{default:a((function(){return[i]})),_:1}),Object(c["createVNode"])("div",s,[Object(c["createVNode"])("h3",o,[d,Object(c["createTextVNode"])(Object(c["toDisplayString"])(ce.order.id),1)]),Object(c["createVNode"])("span",l,[u,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translateTime(ce.order.create_at,"string")),1)])]),Object(c["createVNode"])("div",p,[Object(c["createVNode"])("h4",b,[O,Object(c["withDirectives"])(Object(c["createVNode"])("span",null,[ce.order.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("span",j,[m,h])):(Object(c["openBlock"])(),Object(c["createBlock"])("span",f,[g,v]))],512),[[c["vShow"],!ce.isEdit]])]),Object(c["withDirectives"])(Object(c["createVNode"])("div",x,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"switch-paid form-check-input",type:"checkbox",checked:ce.tempOrder.is_paid,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ce.tempOrder.is_paid=e})},null,8,["checked"]),[[c["vModelCheckbox"],ce.tempOrder.is_paid]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",{class:"switch-paid text-success",onClick:t[3]||(t[3]=function(e){return ce.tempOrder.is_paid=!ce.tempOrder.is_paid})},"已付款",512),[[c["vShow"],ce.tempOrder.is_paid]]),Object(c["withDirectives"])(Object(c["createVNode"])("span",{class:"switch-paid text-danger",onClick:t[4]||(t[4]=function(e){return ce.tempOrder.is_paid=!ce.tempOrder.is_paid})},"未付款",512),[[c["vShow"],!ce.tempOrder.is_paid]])],512),[[c["vShow"],ce.isEdit]])]),Object(c["createVNode"])("ul",N,[Object(c["createVNode"])("li",V,[w,Object(c["createVNode"])("span",y,Object(c["toDisplayString"])(ce.order.user.name),1)]),Object(c["createVNode"])("li",k,[S,Object(c["createVNode"])("span",D,Object(c["toDisplayString"])(ce.order.user.tel),1)]),Object(c["createVNode"])("li",E,[L,Object(c["createVNode"])("span",_,Object(c["toDisplayString"])(ce.order.user.email),1)]),Object(c["createVNode"])("li",T,[M,Object(c["createVNode"])("span",C,Object(c["toDisplayString"])(ce.order.user.address),1)])]),Object(c["createVNode"])("ul",B,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(ce.order.products,(function(e){var t,r,n,i;return Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:e.id,class:"col-lg-6"},[Object(c["createVNode"])("div",R,[Object(c["createVNode"])("div",I,[Object(c["createVNode"])("h2",$,[Object(c["createVNode"])(oe,{to:"/product/".concat(e.product.id),class:"product-name text-decoration-none"},{default:a((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.product.title),1)]})),_:2},1032,["to"])]),Object(c["createVNode"])("span",U,[F,Object(c["createVNode"])("span",z,Object(c["toDisplayString"])(e.product.id),1)])]),Object(c["createVNode"])("div",J,[Object(c["createVNode"])("img",{src:e.product.imageUrl||e.product.imagesUrl[0],alt:e.product.title,class:"product-img rounded me-8"},null,8,["src","alt"]),Object(c["createVNode"])("div",P,[Object(c["createVNode"])("h4",q,"類別: "+Object(c["toDisplayString"])(e.product.category),1),Object(c["createVNode"])("p",A,[Object(c["createVNode"])("span",W,"原價: "+Object(c["toDisplayString"])(null===(t=e.product.origin_price)||void 0===t?void 0:t.toLocaleString()),1),Object(c["createVNode"])("span",null,"售價: "+Object(c["toDisplayString"])(null===(r=e.product.price)||void 0===r?void 0:r.toLocaleString()),1)]),Object(c["createVNode"])("p",Y,"數量: "+Object(c["toDisplayString"])(e.qty),1),Object(c["createVNode"])("p",G,"金額: "+Object(c["toDisplayString"])(null===(n=e.total)||void 0===n?void 0:n.toLocaleString()),1),Object(c["createVNode"])("p",H,[K,Object(c["createVNode"])("span",Q,Object(c["toDisplayString"])(null===(i=e.final_total)||void 0===i?void 0:i.toLocaleString()),1)])])])])])})),128))]),Object(c["createVNode"])("div",X,[Object(c["createVNode"])("div",null,[Object(c["withDirectives"])(Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=function(){return ae.editOrder&&ae.editOrder.apply(ae,arguments)})}," 編輯 ",512),[[c["vShow"],!ce.isEdit]]),Object(c["withDirectives"])(Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary me-3",onClick:t[6]||(t[6]=function(){return ae.cancelEditOrder&&ae.cancelEditOrder.apply(ae,arguments)})}," 取消 ",512),[[c["vShow"],ce.isEdit]]),Object(c["withDirectives"])(Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary me-3",onClick:t[7]||(t[7]=function(e){return ae.saveEditOrder(ce.order.id)})}," 儲存 ",512),[[c["vShow"],ce.isEdit]])]),Object(c["withDirectives"])(Object(c["createVNode"])("button",{type:"button",class:"\n            btn btn-primary\n            px-10\n            me-auto\n          ",onClick:t[8]||(t[8]=function(){return ae.showModal&&ae.showModal.apply(ae,arguments)})}," 刪除 ",512),[[c["vShow"],ce.isEdit]]),Object(c["createVNode"])("p",Z,[ee,Object(c["withDirectives"])(Object(c["createVNode"])("span",{class:"fs-3"},Object(c["toDisplayString"])(null===(ne=ce.order.total)||void 0===ne?void 0:ne.toLocaleString()),513),[[c["vShow"],!ce.isEdit]]),Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",class:"price-input fs-3 text-end ps-2 mt-5 mt-sm-0",min:"0","onUpdate:modelValue":t[9]||(t[9]=function(e){return ce.tempOrder.total=e})},null,512),[[c["vShow"],ce.isEdit],[c["vModelText"],ce.tempOrder.total,void 0,{number:!0}]]),te])])])])],64)})),ce=r("5530"),ae=r("1da1"),ne=(r("96cf"),r("2f34")),ie=r("365c"),se=r("965d"),oe=r("714b"),de={components:{Modal:oe["a"]},mixins:[se["a"]],data:function(){return{isLoading:!1,isEdit:!1,order:{user:{}},tempOrder:{}}},methods:{getOrder:function(e){var t=this;return Object(ae["a"])(regeneratorRuntime.mark((function r(){var c,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,r.prev=1,r.next=4,Object(ie["k"])(e);case 4:c=r.sent,a=c.data,a.success?t.order=a.order:(Object(ne["a"])("找不到訂單!","danger"),t.$router.push("/admin/orders")),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),Object(ne["a"])("找不到訂單!","danger");case 12:t.isLoading=!1;case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},saveEditOrder:function(e){var t=this;return Object(ae["a"])(regeneratorRuntime.mark((function r(){var c,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,r.prev=1,r.next=4,Object(ie["C"])(e,{data:t.tempOrder});case 4:if(c=r.sent,a=c.data,!a.success){r.next=13;break}return Object(ne["a"])("成功更新訂單!","success"),r.next=10,t.getOrder(e);case 10:t.isEdit=!1,r.next=14;break;case 13:Object(ne["a"])(a.message,"dnager");case 14:r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](1),Object(ne["a"])("發生錯誤!","danger");case 19:t.isLoading=!1;case 20:case"end":return r.stop()}}),r,null,[[1,16]])})))()},deleteOrder:function(){var e=this;return Object(ae["a"])(regeneratorRuntime.mark((function t(){var r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ie["a"])(e.order.id);case 3:r=t.sent,c=r.data,c.success?(Object(ne["a"])("已刪除訂單!"),e.$router.push("/admin/orders")):Object(ne["a"])(c.message,"danger"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(ne["a"])("發生錯誤!","danger");case 11:e.$refs.msgModal.hideModal();case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},editOrder:function(){this.isEdit=!0,this.tempOrder=Object(ce["a"])({},this.order)},cancelEditOrder:function(){this.isEdit=!1},showModal:function(){this.$refs.msgModal.showModal({title:"刪除訂單",content:"是否刪除訂單? 刪除後無法恢復。"})}},watch:{"$route.params.id":{handler:function(e){"BackendOrder"===this.$route.name&&this.getOrder(e)}}},created:function(){this.getOrder(this.$route.params.id)},beforeRouteLeave:function(e,t,r){this.$refs.msgModal.isLoading=!1,r()}};r("37cf");de.render=re,de.__scopeId="data-v-a8442d14";t["default"]=de},"37cf":function(e,t,r){"use strict";r("8250")},"44e7":function(e,t,r){var c=r("861d"),a=r("c6b6"),n=r("b622"),i=n("match");e.exports=function(e){var t;return c(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},8250:function(e,t,r){},"965d":function(e,t,r){"use strict";r("a15b"),r("d81d"),r("ac1f"),r("1276");var c={methods:{translateTime:function(e,t){var r=null;if("string"===t){var c={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};r=new Date(1e3*e).toLocaleString("zh-tw",c)}else if("dash"===t){var a={year:"numeric",month:"numeric",day:"numeric"},n=new Date(1e3*e).toLocaleString("zh-TW",a);n=n.split("/").map((function(e){return e<10?"0".concat(e):e})).join("-"),r=n}return r}}};t["a"]=c},a15b:function(e,t,r){"use strict";var c=r("23e7"),a=r("44ad"),n=r("fc6a"),i=r("a640"),s=[].join,o=a!=Object,d=i("join",",");c({target:"Array",proto:!0,forced:o||!d},{join:function(e){return s.call(n(this),void 0===e?",":e)}})},b0c0:function(e,t,r){var c=r("83ab"),a=r("9bf2").f,n=Function.prototype,i=n.toString,s=/^\s*function ([^ (]*)/,o="name";c&&!(o in n)&&a(n,o,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-5bae6585.85e91920.js.map